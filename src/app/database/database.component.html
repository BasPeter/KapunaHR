<section fxLayout="column" fxLayoutGap="8px">
  <mat-toolbar class="database-toolbar">
    Kapuna MaData

    <div fxFlex class="fill-remaining-space"></div>

    <button mat-flat-button color="primary" fxFlex="120px" [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
      <mat-icon svgIcon="database"></mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item fxLayoutAlign="space-between center" (click)="selectCollection('log')">
        <span>Log</span>
        <div fxFlex class="fill-remaining-space"></div>
        <mat-icon class="no-margin" svgIcon="collection"></mat-icon>
      </button>
      <button mat-menu-item fxLayoutAlign="space-between center" (click)="selectCollection('patient')">
        <span>Patient</span>
        <div fxFlex class="fill-remaining-space"></div>
        <mat-icon class="no-margin" svgIcon="collection"></mat-icon>
      </button>
    </mat-menu>
  </mat-toolbar>

  <div class="documents">
    <ng-container *ngFor="let document of (selectedCollection?.documenten$ | async)?.rows">
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{document.doc.first_name + ' ' + document.doc.last_name}}
            </mat-panel-title>
            <mat-panel-description>
              {{selectedCollection.name}} Document
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div fxLayout="column">

          <button mat-flat-button color="accent" (click)="openDialog(document.doc)">Edit document</button>

          <pre>{{document.doc | json}}</pre>


          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </ng-container>
  </div>
</section>
